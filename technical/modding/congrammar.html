<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>.con File Grammar &mdash; RealityDocs  documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BF2 Console Commands" href="consolecommands.html" />
    <link rel="prev" title="Command Line Options" href="cmdoptions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            RealityDocs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Technical Information Wiki</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../admin/index.html">Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../engine/index.html">Battlefield Engine</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Modding</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cmdoptions.html">Command Line Options</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">.con</span></code> File Grammar</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#comments">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#statements">Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditionals">Conditionals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return"><code class="docutils literal notranslate"><span class="pre">Return</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#include-and-run"><code class="docutils literal notranslate"><span class="pre">include</span></code> and <code class="docutils literal notranslate"><span class="pre">run</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#an-example">An Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="consolecommands.html">BF2 Console Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="systemrequirements.html">Server System Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/index.html">Battlefield Python</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">RealityDocs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Technical Information Wiki</a></li>
          <li class="breadcrumb-item"><a href="index.html">Modding</a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">.con</span></code> File Grammar</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/technical/modding/congrammar.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="con-file-grammar">
<h1><code class="docutils literal notranslate"><span class="pre">.con</span></code> File Grammar<a class="headerlink" href="#con-file-grammar" title="Permalink to this headline">¶</a></h1>
<p>Con files are the core of how Battlefield 2 (and 1942 before it) configures its weapons, maps, objects, players and other game assets. These files can be run by the engine or from within the in-game console. The in-game console uses the exact same syntax with the notable difference that multi-line commands like <code class="docutils literal notranslate"><span class="pre">beginRem</span></code> do not work. With Battlefield 2, the console grammar has extended into a rudimentry scripting language, with loops and full conditionals. Battlefield 1942 had only very rudimentry conditionals.</p>
<div class="section" id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h2>
<p>There exist two classes of comments</p>
<p><code class="docutils literal notranslate"><span class="pre">title=&quot;Block</span> <span class="pre">rem&quot;</span> <span class="pre">beginRem</span> <span class="pre">this</span> <span class="pre">text</span> <span class="pre">is</span> <span class="pre">ignored</span> <span class="pre">endRem</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">title=&quot;Line</span> <span class="pre">rem&quot;</span> <span class="pre">rem</span> <span class="pre">this</span> <span class="pre">text</span> <span class="pre">is</span> <span class="pre">ignored</span></code></p>
</div>
<div class="section" id="statements">
<h2>Statements<a class="headerlink" href="#statements" title="Permalink to this headline">¶</a></h2>
<p>Statements are a command followed by a number of optionally “quoted”, whitespace-seperated arguments.</p>
<p><code class="docutils literal notranslate"><span class="pre">title=&quot;Statement</span> <span class="pre">command&quot;</span> <span class="pre">commandClass.commandMethod</span> <span class="pre">argument1</span> <span class="pre">&quot;argument2&quot;</span></code></p>
<p>The number and type of the arguments depends on the command being used. The available commands is beyond the scope of this page, but a good portion of them are included with the editor.</p>
<p>A full list is available by running GNU <code class="docutils literal notranslate"><span class="pre">strings</span></code> against your bf2.exe</p>
<div class="section" id="crd-argument-type">
<h3>CRD Argument Type<a class="headerlink" href="#crd-argument-type" title="Permalink to this headline">¶</a></h3>
<p>Many arguments are a CRD type of argument, which stands for <em>Continuous Random Distribution</em>, and is used to calculate a random number based on the specify properties.</p>
<p><code class="docutils literal notranslate"><span class="pre">title=&quot;A</span> <span class="pre">CRD</span> <span class="pre">always</span> <span class="pre">has</span> <span class="pre">four</span> <span class="pre">sub-arguments&quot;</span> <span class="pre">CRD_NONE/3/0/0</span></code></p>
<p>The first argument says what type of distribution should be used, the second and third depend on the type and the latter is called symmetry, and can affect any of the distributions; it will be explained later.</p>
<p>The meaning of the second and third arguments, which are always ‘’’numbers’’’, varies depending on the type of distribution property specified. The four types for this first argument are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CRD_NONE</span></code></p>
<p>Do not vary the argument at all, just return the first number.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRD_UNIFORM</span></code></p>
<p>Uniform random distribution, between the two numbers specified.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRD_EXPONENTIAL</span></code></p>
<p>Exponential drop off, first number specifies the mean (average).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRD_NORMAL</span></code></p>
<p>Normal distribution, the first number is the mean, the second the variance.</p>
</li>
</ul>
<p>We just need the first three arguments to compute a random number, the final, fourth argument is a boolean and can affect the sign of this computed number: If this argument is 1 (true), then there is a 50/50 chance that the computed number will be negated. If 0 (false), no negation “coin-flip” takes place.</p>
<p>Some examples:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ObjectTemplate.TimeToLive</span> <span class="pre">CRD_NONE/240/0/0</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TimeToLive</span></code> will be set to 240: no computation was performed we just returned the first argument. This sort of CRD can be directly replaced by the number itself.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ObjectTemplate.TimeToLive</span> <span class="pre">CRD_UNIFORM/2/7/0</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TimeToLive</span></code> can be one of [2, 3, 4, 5, 6, 7] and they have all the same chance.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ObjectTemplate.rotationalSpeedInDof</span> <span class="pre">CRD_EXPONENTIAL/-20/0/1</span></code></p>
<p>The exponential distribution basically gives a distribution curve that drops off sharply and then levels out. It is computed by <code class="docutils literal notranslate"><span class="pre">-mean*ln(random(0,1))</span></code>. In other words, a random number between 0 and 1 (not including 0 or 1) is generated, the natural logarithm of this number is computed, and the result is multiplied by the negative of the mean (the average), the second argument (and first number) passed in. For example, if the random number generated was 0.1, the natural log is -2.3, so since the mean was -20, the final number returned would be -(-20)*-2.3 = -46. Since the symmetric flag, the last argument, is set to 1 (true), there is a 50/50 chance that this result will be negated, i.e. be returned as 46 instead of -46.</p>
<p>NOTE: this distribution is often misused in the Battlefield code, e.g.</p>
<p><code class="docutils literal notranslate"><span class="pre">ObjectTemplate.initRotation</span> <span class="pre">CRD_EXPONENTIAL/0/180/1</span></code></p>
<p>is a common use. However, this setting actually always returns a value of 0, since that is the mean specified. The “180” argument is ignored.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ObjectTemplate.timeToLive</span> <span class="pre">CRD_NORMAL/2/3.5/0</span></code></p>
<p>A normal distribution is a classic bell curve shape. The second argument is the mean, the average value, and the third argument is the variance, how fast the distribution curve drops off into its bell shape. The fourth argument again acts to force symmetry if set, though the bell curve has its own symmetry when the mean is 0.</p>
<p>Variance specifies the range in which about 4/5ths of the numbers generated will fall. In our example, the 2 is the average time to live desired, and a variance of 3.5 means that this value can vary fairly widely; about 4/5ths of the numbers generated will be in the range +3.5 to -3.5 from the mean of 2, i.e. -1.5 to 5.5, with 1/5th of the numbers appearing above and below this range.</p>
</li>
</ul>
<p><a class="reference external" href="https://bfmods.com/mdt/scripting/CRD.html">Source</a></p>
</div>
</div>
<div class="section" id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h2>
<p>Variables must be predefined, and have a strict naming system. All mutable variables must begin with <code class="docutils literal notranslate"><span class="pre">v_</span></code> whereas all immutable variables or <em>constants</em> must begin with <code class="docutils literal notranslate"><span class="pre">c_</span></code>. It’s a simple form of <a class="reference external" href="https://en.wikipedia.org/wiki/Hungarian_notation">Hungarian Notation</a>.</p>
<div class="section" id="mutable-variables">
<h3>Mutable Variables<a class="headerlink" href="#mutable-variables" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">v_dongs</span> <span class="pre">=</span> <span class="pre">test</span></code></p>
<p>Defines a new variable called <code class="docutils literal notranslate"><span class="pre">dongs</span></code> or <code class="docutils literal notranslate"><span class="pre">v_dongs</span></code> depending on your point of view with the value “test”. When defining a variable you can omit the default value however:</p>
<p><code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">v_dongs</span></code></p>
<p>is a value construct for example.</p>
</div>
<div class="section" id="immutable-variables">
<h3>Immutable Variables<a class="headerlink" href="#immutable-variables" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">c_butts</span> <span class="pre">=</span> <span class="pre">test</span></code></p>
<p>Defines a constant called, again, <code class="docutils literal notranslate"><span class="pre">butts</span></code> or <code class="docutils literal notranslate"><span class="pre">c_butts</span></code> with the value “test”. Obviously, this variable cannot be changed.</p>
</div>
<div class="section" id="const-vs-var-and-assignments">
<h3><code class="docutils literal notranslate"><span class="pre">const</span></code> vs. <code class="docutils literal notranslate"><span class="pre">var</span></code> and assignments<a class="headerlink" href="#const-vs-var-and-assignments" title="Permalink to this headline">¶</a></h3>
<p>Assigning to a variable is as simple as appending <code class="docutils literal notranslate"><span class="pre">-&gt;</span> <span class="pre">v_varname</span></code> to any command. However, many commands do not return a value. The ones that do generally return either a boolean value (<code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code>) or a simple string.</p>
<p>Clearly, trying to assign to a <code class="docutils literal notranslate"><span class="pre">const</span></code> variable is an error and will not work.</p>
</div>
</div>
<div class="section" id="conditionals">
<h2>Conditionals<a class="headerlink" href="#conditionals" title="Permalink to this headline">¶</a></h2>
<p>Conditionals include the standard constructs. These evaluate an ‘’expression’’</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">...</span> <span class="pre">endIf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">...</span> <span class="pre">elseIf</span> <span class="pre">...</span> <span class="pre">endIf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">...</span> <span class="pre">endWhile</span></code></p></li>
</ul>
<div class="section" id="expressions">
<h3>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h3>
<p>The grammar of an expression is roughly:</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;variable&gt;</span> <span class="pre">&lt;comparator&gt;</span> <span class="pre">&lt;value&gt;</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">variable</span></code></p>
<p>Any variable name beginning with <code class="docutils literal notranslate"><span class="pre">v_</span></code> or <code class="docutils literal notranslate"><span class="pre">c_</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">comparator</span></code></p>
<p>One of <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> or their textual equivalents: <code class="docutils literal notranslate"><span class="pre">lessOrEqualThan</span></code>, <code class="docutils literal notranslate"><span class="pre">lessThan</span></code>, <code class="docutils literal notranslate"><span class="pre">greaterOrEqualThan</span></code>, <code class="docutils literal notranslate"><span class="pre">greaterThan</span></code>, <code class="docutils literal notranslate"><span class="pre">notEquals</span></code>, <code class="docutils literal notranslate"><span class="pre">equals</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p>
<p>Any literal string, quoted if neccessary.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="return">
<h2><code class="docutils literal notranslate"><span class="pre">Return</span></code><a class="headerlink" href="#return" title="Permalink to this headline">¶</a></h2>
<p>You may cease interpretation of the current .con file by using the command <code class="docutils literal notranslate"><span class="pre">return</span></code>. This resumes interpretation from the calling file. It is an error to use this unless the file was called with…</p>
</div>
<div class="section" id="include-and-run">
<h2><code class="docutils literal notranslate"><span class="pre">include</span></code> and <code class="docutils literal notranslate"><span class="pre">run</span></code><a class="headerlink" href="#include-and-run" title="Permalink to this headline">¶</a></h2>
<p>Both <code class="docutils literal notranslate"><span class="pre">include</span></code> and <code class="docutils literal notranslate"><span class="pre">run</span></code> trigger the interpretation of another .con file.</p>
<p>They also have the ability to set <code class="docutils literal notranslate"><span class="pre">arguments</span></code>, which are a special type of mutable variable. For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">test.con</span> <span class="pre">1</span> <span class="pre">2</span> <span class="pre">3</span></code></p>
<p>Runs <code class="docutils literal notranslate"><span class="pre">test.con</span></code>. In <code class="docutils literal notranslate"><span class="pre">test.con</span></code>, the variables <code class="docutils literal notranslate"><span class="pre">v_arg1</span></code>, <code class="docutils literal notranslate"><span class="pre">v_arg2</span></code> and <code class="docutils literal notranslate"><span class="pre">v_arg3</span></code> are set to <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span></code> and <code class="docutils literal notranslate"><span class="pre">3</span></code>, respectively.</p>
<p>Typically this is used along with a conditional to do something for the editor mode, or to do something different for single player mode (a common use in BF1942, where this method also existed).</p>
<p>As for differences, <code class="docutils literal notranslate"><span class="pre">run</span></code> seems to create a new scope, while <code class="docutils literal notranslate"><span class="pre">include</span></code> does not.</p>
</div>
<div class="section" id="an-example">
<h2>An Example<a class="headerlink" href="#an-example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">v_tst</span>
<span class="n">fileManager</span><span class="o">.</span><span class="n">fileExists</span> <span class="n">movies</span><span class="o">/</span><span class="n">menu</span><span class="o">.</span><span class="n">bik</span> <span class="o">-&gt;</span> <span class="n">v_tst</span>
<span class="k">if</span> <span class="n">v_tst</span> <span class="o">==</span> <span class="mi">0</span>
<span class="n">fileManager</span><span class="o">.</span><span class="n">copyFile</span> <span class="o">../../</span><span class="n">mods</span><span class="o">/</span><span class="n">bf2</span><span class="o">/</span><span class="n">movies</span><span class="o">/</span><span class="n">menu</span><span class="o">.</span><span class="n">bik</span> <span class="n">movies</span><span class="o">/</span><span class="n">menu</span><span class="o">.</span><span class="n">bik</span>
<span class="n">fileManager</span><span class="o">.</span><span class="n">copyFile</span> <span class="o">../../</span><span class="n">mods</span><span class="o">/</span><span class="n">bf2</span><span class="o">/</span><span class="n">movies</span><span class="o">/</span><span class="n">menu_loggedin</span><span class="o">.</span><span class="n">bik</span> <span class="n">movies</span><span class="o">/</span><span class="n">menu_loggedin</span><span class="o">.</span><span class="n">bik</span>
<span class="n">endIf</span>
</pre></div>
</div>
<p>This example checks if <code class="docutils literal notranslate"><span class="pre">movies/menu.bik</span></code> exists, and if it doesn’t copies two files from the <code class="docutils literal notranslate"><span class="pre">bf2</span></code> mod to the current mod.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cmdoptions.html" class="btn btn-neutral float-left" title="Command Line Options" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="consolecommands.html" class="btn btn-neutral float-right" title="BF2 Console Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Project Reality Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>