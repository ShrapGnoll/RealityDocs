<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The RCon Protocol &mdash; RealityDocs  documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Battlefield Python" href="../python/index.html" />
    <link rel="prev" title="BF2 Porting" href="ports.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            RealityDocs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Technical Information Wiki</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../admin/index.html">Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../engine/index.html">Battlefield Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modding/index.html">Modding</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Networking</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ports.html">BF2 Porting</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">The RCon Protocol</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basics">Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#banner">Banner</a></li>
<li class="toctree-l4"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#login">Login</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exec"><code class="docutils literal notranslate"><span class="pre">exec</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#users"><code class="docutils literal notranslate"><span class="pre">users</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../python/index.html">Battlefield Python</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">RealityDocs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Technical Information Wiki</a></li>
          <li class="breadcrumb-item"><a href="index.html">Networking</a></li>
      <li class="breadcrumb-item active">The RCon Protocol</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/technical/networking/protocols_rcon.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="the-rcon-protocol">
<h1>The RCon Protocol<a class="headerlink" href="#the-rcon-protocol" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>This document describes the RCON (“Remote Console”) protocol spoken by the Battlefield 2 server; RCON is run as a TCP service, operating on port 4711 by default. The BF2 server implements the TCP listener and RCON protocol completely in Python, in the administrative module. A description of how the administrative module handles RCON can be found <a class="reference internal" href="../admin/module.html"><span class="doc">here</span></a>.</p>
</div>
<div class="section" id="banner">
<h2>Banner<a class="headerlink" href="#banner" title="Permalink to this headline">¶</a></h2>
<p>Upon connecting, the client is sent a header from the server, ending with /n/n (two 0x0A characters). One of the lines is prefixed with the text (sans quotes), “### Digest seed:”. The value after the colon and space needs to be stored for the login sequence. An example banner:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">### Battlefield 2 default RCON/admin ready.</span>
<span class="c1">### Digest seed: dOrdNsTRDWSvPWXi</span>
</pre></div>
</div>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<p>All commands sent by the client have /n (0x0A) appended to indicate the end-of-line. An optional 0x02 character can be prefixed to the command - this instructs the server to append a 0x04 character on the output generated by the command to indicate the end of the data. However, its worth noting that the server does not send a 0x0A (newline) after the 0x04 (EOT) character, so you’ll have to make sure your program can handle this. This is an optional part of the protocol that can be implemented if returning all of the output is important to your environment.</p>
<p>The sample remoteconsole.py script included with BF2 uses the 0x02 character on all commands by default. All examples below are shown without the 0x02 and 0x04 characters.</p>
</div>
<div class="section" id="login">
<h2>Login<a class="headerlink" href="#login" title="Permalink to this headline">¶</a></h2>
<p>A digest of the password using the <a class="reference external" href="https://en.wikipedia.org/wiki/MD5">MD5 algorithm</a> is calculated with the seed obtained from the banner and is represented in hexadecimal format (e.g. <code class="docutils literal notranslate"><span class="pre">106c9f3b52c173dc210e7ee612e689bb</span></code>). Note that the seed isnt used in the “normal” seed manner. To get a working digest, you take the seed returned in the banner, concatenated with the password, and then send the returned digest to the server. For example lets say the returned seed is <code class="docutils literal notranslate"><span class="pre">PXYHKqLrFfENvONV</span></code> and the RCON password is <code class="docutils literal notranslate"><span class="pre">password</span></code>, the string to return the digest of would be <code class="docutils literal notranslate"><span class="pre">PXYHKqLrFfENvONVpassword</span></code>, which is this case whould yield a digest of <code class="docutils literal notranslate"><span class="pre">bc3d874909af1404eec2765ef3613b19</span></code>.</p>
<p>A login command may look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">6</span><span class="n">c</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">67</span> <span class="mi">69</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">20</span> <span class="mi">62</span>  <span class="mi">64</span> <span class="mi">32</span> <span class="mi">39</span> <span class="mi">39</span> <span class="mi">37</span> <span class="mi">39</span> <span class="mi">30</span> <span class="mi">64</span> <span class="mi">64</span> <span class="n">login</span> <span class="n">b</span> <span class="n">d299790dd</span>
<span class="mi">33</span> <span class="mi">37</span> <span class="mi">37</span> <span class="mi">34</span> <span class="mi">36</span> <span class="mi">62</span> <span class="mi">32</span>  <span class="mi">31</span> <span class="mi">66</span> <span class="mi">32</span> <span class="mi">32</span> <span class="mi">33</span> <span class="mi">65</span> <span class="mi">33</span> <span class="mi">34</span> <span class="mi">37</span> <span class="mi">37746</span><span class="n">b2</span> <span class="mi">1</span><span class="n">f223e347</span>
<span class="mi">39</span> <span class="mi">66</span> <span class="mi">63</span> <span class="mi">33</span> <span class="mi">63</span> <span class="mi">31</span> <span class="mi">0</span><span class="n">a</span>                             <span class="mi">9</span><span class="n">fc3c1</span><span class="o">.</span>
</pre></div>
</div>
<p>Possible responses on the standard BF2 RCON server are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">41</span> <span class="mi">75</span> <span class="mi">74</span> <span class="mi">68</span> <span class="mi">65</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">74</span> <span class="mi">69</span>  <span class="mi">63</span> <span class="mi">61</span> <span class="mi">74</span> <span class="mi">69</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">20</span> <span class="mi">66</span> <span class="n">Authenti</span> <span class="n">cation</span> <span class="n">f</span>
<span class="mi">61</span> <span class="mi">69</span> <span class="mi">6</span><span class="n">c</span> <span class="mi">65</span> <span class="mi">64</span> <span class="mi">2</span><span class="n">e</span> <span class="mi">0</span><span class="n">a</span>                             <span class="n">ailed</span><span class="o">..</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">41</span> <span class="mi">75</span> <span class="mi">74</span> <span class="mi">68</span> <span class="mi">65</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">74</span> <span class="mi">69</span>  <span class="mi">63</span> <span class="mi">61</span> <span class="mi">74</span> <span class="mi">69</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">20</span> <span class="mi">73</span> <span class="n">Authenti</span> <span class="n">cation</span> <span class="n">s</span>
<span class="mi">75</span> <span class="mi">63</span> <span class="mi">63</span> <span class="mi">65</span> <span class="mi">73</span> <span class="mi">73</span> <span class="mi">66</span> <span class="mi">75</span>  <span class="mi">6</span><span class="n">c</span> <span class="mi">2</span><span class="n">c</span> <span class="mi">20</span> <span class="mi">72</span> <span class="mi">63</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">20</span> <span class="n">uccessfu</span> <span class="n">l</span><span class="p">,</span> <span class="n">rcon</span>
<span class="mi">72</span> <span class="mi">65</span> <span class="mi">61</span> <span class="mi">64</span> <span class="mi">79</span> <span class="mi">2</span><span class="n">e</span> <span class="mi">0</span><span class="n">a</span>                             <span class="n">ready</span><span class="o">..</span>
</pre></div>
</div>
<p>You must have authenticated successfully before other commands are unlocked, or you will be met with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">65</span> <span class="mi">72</span> <span class="mi">72</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">72</span> <span class="mi">3</span><span class="n">a</span> <span class="mi">20</span> <span class="mi">6</span><span class="n">e</span>  <span class="mi">6</span><span class="n">f</span> <span class="mi">74</span> <span class="mi">20</span> <span class="mi">61</span> <span class="mi">75</span> <span class="mi">74</span> <span class="mi">68</span> <span class="mi">65</span> <span class="n">error</span><span class="p">:</span> <span class="n">n</span> <span class="n">ot</span> <span class="n">authe</span>
<span class="mi">6</span><span class="n">e</span> <span class="mi">74</span> <span class="mi">69</span> <span class="mi">63</span> <span class="mi">61</span> <span class="mi">74</span> <span class="mi">65</span> <span class="mi">64</span>  <span class="mi">3</span><span class="n">a</span> <span class="mi">20</span> <span class="mi">79</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">75</span> <span class="mi">20</span> <span class="mi">63</span> <span class="mi">61</span> <span class="n">nticated</span> <span class="p">:</span> <span class="n">you</span> <span class="n">ca</span>
<span class="mi">6</span><span class="n">e</span> <span class="mi">20</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">6</span><span class="n">c</span> <span class="mi">79</span> <span class="mi">20</span> <span class="mi">69</span>  <span class="mi">6</span><span class="n">e</span> <span class="mi">76</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">6</span><span class="n">b</span> <span class="mi">65</span> <span class="mi">20</span> <span class="mi">27</span> <span class="mi">6</span><span class="n">c</span> <span class="n">n</span> <span class="n">only</span> <span class="n">i</span> <span class="n">nvoke</span> <span class="s1">&#39;l</span>
<span class="mi">6</span><span class="n">f</span> <span class="mi">67</span> <span class="mi">69</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">27</span> <span class="mi">0</span><span class="n">a</span>                                <span class="n">ogin</span><span class="s1">&#39;.</span>
</pre></div>
</div>
</div>
<div class="section" id="exec">
<h2><code class="docutils literal notranslate"><span class="pre">exec</span></code><a class="headerlink" href="#exec" title="Permalink to this headline">¶</a></h2>
<p>This runs a command (such as a PB command) or gets/sets a value of a setting on the server. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">65</span> <span class="mi">78</span> <span class="mi">65</span> <span class="mi">63</span> <span class="mi">20</span> <span class="mi">73</span> <span class="mi">76</span>  <span class="mi">2</span><span class="n">e</span> <span class="mi">74</span> <span class="mi">69</span> <span class="mi">63</span> <span class="mi">6</span><span class="n">b</span> <span class="mi">65</span> <span class="mi">74</span> <span class="mi">72</span> <span class="mi">61</span> <span class="n">exec</span> <span class="n">sv</span> <span class="o">.</span><span class="n">ticketra</span>
<span class="mi">74</span> <span class="mi">69</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">0</span><span class="n">a</span>                                      <span class="n">tio</span><span class="o">.</span>
</pre></div>
</div>
<p>Response:</p>
<p><code class="docutils literal notranslate"><span class="pre">31</span> <span class="pre">30</span> <span class="pre">30</span> <span class="pre">0a</span> <span class="pre">100.</span></code></p>
<p>Example PB command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">65</span> <span class="mi">78</span> <span class="mi">65</span> <span class="mi">63</span> <span class="mi">20</span> <span class="mi">70</span> <span class="mi">62</span>  <span class="mi">5</span><span class="n">f</span> <span class="mi">73</span> <span class="mi">76</span> <span class="mi">5</span><span class="n">f</span> <span class="mi">70</span> <span class="mi">6</span><span class="n">c</span> <span class="mi">69</span> <span class="mi">73</span> <span class="mi">74</span> <span class="n">exec</span> <span class="n">pb</span> <span class="n">_sv_plist</span>
<span class="mi">0</span><span class="n">a</span>
</pre></div>
</div>
<p>PunkBuster commands will not return any text due to a bug (or ‘feature’) in BF2/PB integration. Their output will be shown on the server console itself, or in the PB log files if required.</p>
</div>
<div class="section" id="users">
<h2><code class="docutils literal notranslate"><span class="pre">users</span></code><a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h2>
<p>This shows the active users logged into the RCON system. Request:</p>
<p><code class="docutils literal notranslate"><span class="pre">75</span> <span class="pre">73</span> <span class="pre">65</span> <span class="pre">72</span> <span class="pre">73</span> <span class="pre">0a</span> <span class="pre">users.</span></code></p>
<p>I believe the response varies depending on which RCON method people are using (i.e. standalone client, in-game etc). Here is an example, with two remote standalone clients:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">61</span> <span class="mi">63</span> <span class="mi">74</span> <span class="mi">69</span> <span class="mi">76</span> <span class="mi">65</span> <span class="mi">20</span> <span class="mi">72</span>  <span class="mi">63</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">20</span> <span class="mi">75</span> <span class="mi">73</span> <span class="mi">65</span> <span class="mi">72</span> <span class="n">active</span> <span class="n">r</span> <span class="n">con</span> <span class="n">user</span>
<span class="mi">73</span> <span class="mi">3</span><span class="n">a</span> <span class="mi">0</span><span class="n">a</span> <span class="mi">74</span> <span class="mi">63</span> <span class="mi">70</span> <span class="mi">3</span><span class="n">a</span> <span class="mi">20</span>  <span class="mi">31</span> <span class="mi">32</span> <span class="mi">2</span><span class="n">e</span> <span class="mi">33</span> <span class="mi">34</span> <span class="mi">2</span><span class="n">e</span> <span class="mi">35</span> <span class="mi">36</span> <span class="n">s</span><span class="p">:</span><span class="o">.</span><span class="n">tcp</span><span class="p">:</span>  <span class="mf">12.34</span><span class="o">.</span><span class="mi">56</span>
<span class="mi">2</span><span class="n">e</span> <span class="mi">37</span> <span class="mi">38</span> <span class="mi">3</span><span class="n">a</span> <span class="mi">36</span> <span class="mi">32</span> <span class="mi">33</span> <span class="mi">35</span>  <span class="mi">32</span> <span class="mi">0</span><span class="n">a</span> <span class="mi">74</span> <span class="mi">63</span> <span class="mi">70</span> <span class="mi">3</span><span class="n">a</span> <span class="mi">20</span> <span class="mi">38</span> <span class="o">.</span><span class="mi">78</span><span class="p">:</span><span class="mi">6235</span> <span class="mf">2.</span><span class="n">tcp</span><span class="p">:</span> <span class="mi">8</span>
<span class="mi">37</span> <span class="mi">2</span><span class="n">e</span> <span class="mi">36</span> <span class="mi">35</span> <span class="mi">2</span><span class="n">e</span> <span class="mi">34</span> <span class="mi">33</span> <span class="mi">2</span><span class="n">e</span>  <span class="mi">32</span> <span class="mi">31</span> <span class="mi">3</span><span class="n">a</span> <span class="mi">36</span> <span class="mi">32</span> <span class="mi">32</span> <span class="mi">34</span> <span class="mi">38</span> <span class="mf">7.65</span><span class="o">.</span><span class="mf">43.</span> <span class="mi">21</span><span class="p">:</span><span class="mi">62248</span>
<span class="mi">0</span><span class="n">a</span>
</pre></div>
</div>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<p>If a command does not exist, you will receive this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">75</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">6</span><span class="n">b</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">77</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">20</span>  <span class="mi">63</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">6</span><span class="n">d</span> <span class="mi">6</span><span class="n">d</span> <span class="mi">61</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">64</span> <span class="mi">3</span><span class="n">a</span> <span class="n">unknown</span>  <span class="n">command</span><span class="p">:</span>
<span class="mi">20</span> <span class="mi">27</span> <span class="mi">62</span> <span class="mi">6</span><span class="n">c</span> <span class="mi">61</span> <span class="mi">68</span> <span class="mi">27</span> <span class="mi">0</span><span class="n">a</span>                           <span class="s1">&#39;blah&#39;</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ports.html" class="btn btn-neutral float-left" title="BF2 Porting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../python/index.html" class="btn btn-neutral float-right" title="Battlefield Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Project Reality Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>